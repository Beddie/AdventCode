using Logic.Interface;
using Logic.Properties;
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading;
using System.Threading.Tasks;

namespace Logic.Days
{
    public class Day13 : AdventBase
    {
        public Day13()
        {
            //Test = true;
            PuzzleInput = Test ? puzzletest : puzzle;

            ID = 13;
            Name = "Day 13: Mine Cart Madness";
            trackLines = PuzzleInput.Replace("\r\n", "").ToCharArray();
            stride = PuzzleInput.Substring(0, PuzzleInput.IndexOf("\r\n")).Length;

            //Directions.AddLast(Direction.Up);
            //Directions.AddLast(Direction.Right);
            //Directions.AddLast(Direction.Down);
            //Directions.AddLast(Direction.Left);

            //DirectionMemory.AddLast(Direction.Left);
            //DirectionMemory.AddLast(Direction.Straight);
            //DirectionMemory.AddLast(Direction.Right);

        }

        public static List<Direction> Directions = new List<Direction> { Direction.Up, Direction.Right, Direction.Down, Direction.Left };
        public static List<Direction> DirectionMemory = new List<Direction> { Direction.Left, Direction.Straight, Direction.Right };

        private int index = 0;

        public static Direction nextDirection(Direction direction)
        {
            var index = Directions.IndexOf(direction);
            if (index < Directions.Count - 1)
                index += 1;
            else
                index = 0;

            return Directions[index];
        }

        public static Direction previousDirection(Direction direction)
        {
            var index = Directions.IndexOf(direction);
            if (index > 0)
                index -= 1;
            else
                index = Directions.Count - 1;

            return Directions[index];
        }
        public static Direction nextMemory(Direction direction)
        {
            var index = DirectionMemory.IndexOf(direction);
            if (index < DirectionMemory.Count - 1)
                index += 1;
            else
                index = 0;

            return DirectionMemory[index];
        }

        public override string[] Solution()
        {
            return new string[] {
            };
        }

        public enum Direction
        {
            Up = 1,
            Right = 2,
            Down = 3,
            Left = 4,
            Straight = 5
        }


        //private static LinkedList<Direction> Directions = new LinkedList<Direction>();
        //private static LinkedList<Direction> DirectionMemory = new LinkedList<Direction>();

        public class Cart
        {
            public Cart(int index, char direction, int id)
            {
                Index = index;
                switch (direction)
                {
                    case '>':
                        FacingDirection = Direction.Right;
                        previousTrack = '-';
                        break;
                    case 'v':
                        FacingDirection = Direction.Down;
                        previousTrack = '|';
                        break;
                    case '<':
                        FacingDirection = Direction.Left;
                        previousTrack = '-';
                        break;
                    case '^':
                        FacingDirection = Direction.Up;
                        previousTrack = '|';
                        break;
                    default:
                        throw new NotSupportedException();
                }
                ID = id;

            }

            private bool horizontal => FacingDirection == Direction.Right || FacingDirection == Direction.Left;

            public int ID { get; set; }
            private Direction FacingDirection { get; set; }
            private Direction MemoryDirection { get; set; } = Direction.Left;
            public int Index { get; set; }
            private char previousTrack { get; set; }
            private void TurnRight() { }

            public bool Move()
            {
                var currentIndex = Index;

                Index += NextIndex();

                var currentTrackSpecification = trackLines[Index];

                if ("<>^v".Contains(currentTrackSpecification))
                {
                    return true;
                }

                switch (currentTrackSpecification)
                {
                    case '\\':
                        FacingDirection = horizontal ? nextDirection(FacingDirection) : previousDirection(FacingDirection);
                        break;
                    case '/':
                        FacingDirection = horizontal ? previousDirection(FacingDirection) : nextDirection(FacingDirection);
                        break;
                    case '+':
                        if (MemoryDirection != Direction.Straight)
                        {
                            switch (MemoryDirection)
                            {
                                case Direction.Right:
                                    FacingDirection = horizontal ? previousDirection(FacingDirection) : nextDirection(FacingDirection);
                                    break;
                                case Direction.Left:
                                    FacingDirection = horizontal ? nextDirection(FacingDirection) : previousDirection(FacingDirection);
                                    break;
                                default:
                                    throw new NotSupportedException();
                            }
                        }
                        MemoryDirection = nextMemory(MemoryDirection);
                        break;
                    default:
                        break;
                }
                trackLines[currentIndex] = previousTrack;
                trackLines[Index] = GetCartChar();
                previousTrack = currentTrackSpecification;
                return false;
            }

            private char GetCartChar()
            {
                switch (FacingDirection)
                {
                    case Direction.Up:
                        return '^';
                    case Direction.Right:
                        return '>';
                    case Direction.Down:
                        return 'v';
                    case Direction.Left:
                        return '<';
                    default:
                        throw new NotSupportedException();
                }
            }

            private int NextIndex()
            {
                switch (FacingDirection)
                {
                    case Direction.Up:
                        return -stride;
                    case Direction.Right:
                        return +1;
                    case Direction.Down:
                        return +stride;
                    case Direction.Left:
                        return -1;
                    default:
                        throw new NotSupportedException();
                }
            }
        }

        private static char[] trackLines { get; set; }
        public static int stride { get; set; }

        public override string Part1()
        {
            var Carts = PuzzleInput.Replace("\r\n", "").Select((c, index) => new { c, index }).Where(d => d.c == '>' || d.c == 'v' || d.c == '<' || d.c == '^').Select((e, eindex) => new Cart(e.index, e.c, eindex + 1)).ToList();
            var coordinates = string.Empty;
            var crash = false;
            while (!crash)
            {
                foreach (var Cart in Carts)
                {
                    if (Cart.Move()) {
                        crash = true;
                        coordinates = GetCoordinates(Cart.Index);
                    };
                }
                Print();
            }


            return "";
        }

        private string GetCoordinates(int index)
        {
            var ystride = trackLines.Length / stride;
            for (int y = 0; y < ystride; y++)
            {
                for (int x = 0; x < stride; x++)
                {
                    if (index == (x + (y * stride))) {
                        return $"{x},{y}";
                    };
                }
            }
            return string.Empty;
        }

        private void Print()
        {
           // if (Test)
           // {
                var ystride = trackLines.Length / stride;
                var sb = new StringBuilder();
                for (int y = 0; y < ystride; y++)
                {
                    for (int x = 0; x < stride; x++)
                    {
                        sb.Append(trackLines[x + (y * stride)]);
                    }
                    sb.AppendLine();
                }
                Debug.WriteLine(sb.ToString());
           // }
        }

        private void Tick(Cart cart)
        {


        }


        public override string Part2()
        {
            return "";
        }


        private string puzzletest = @"/->-\        
|   |  /----\
| /-+--+-\  |
| | |  | v  |
\-+-/  \-+--/
  \------/   ";

        private string puzzle = @"                                  /----------------------------\                                                                                      
  /-------------------------------+----------------------------+-----------------------\                                                              
  |                               |                            |                     /-+------------------------------------------------\             
  |               /---------------+----------------------------+---------------------+-+-\             /---------\                      |             
  |  /------------+------------\  |                            |                   /-+-+-+-------------+---------+----------------\     |             
  |  |            |            |  |                            |                   | | | |             |         |          /-----+---\ |             
  |  |        /---+------------+--+-------------------------\  |/------------------+-+-+-+-----------\ |         |          |     |   | |             
  |  |        |   |        /---+--+-------------------------+--++------------------+-+-+-+-----------+-+---------+---\      |  /--+---+-+------\      
  |  |        |   |        |/--+--+-------------------------+--++------\           | | | |           | |         |   |      |  |  |   | |      |      
  |  |        |   |        ||  |  |                         |  ||     /+-----------+-+-+-+-----------+-+---------+---+------+--+--+---+-+------+-\    
  |  | /------+---+--------++--+--+-------------------------+--++-----++-----------+-+-+\|           | |         |   |      |  |  |   | |      | |    
  |  | |      |   |        ||  |  |                    /----+--++-----++-----------+-+-+++-----------+-+---------+---+------+--+--+---+\|      | |    
  |  | |    /-+---+--------++--+--+--------------------+----+--++-<---++----------\| | |||           | |/--------+---+-\    |  |  |   |||      | |    
  |  | |    | |  /+--------++--+--+--\               /-+----+--++-----++----------++-+-+++-----------+-++--------+---+-+----+--+--+---+++-----\| |    
  |  | |    | |  ||       /++--+--+--+-----------\   | |    |  ||     ||  /-------++-+-+++-----------+-++--------+---+-+--\ |  |  |   |||     || |    
  | /+-+----+-+--++-------+++--+--+--+-----------+---+-+----+--++-----++--+-------++-+-+++-----------+-++-------\|   | |  | |  |  |   |||     || |    
  | || |    | |  ||       |||/-+--+--+-----------+---+-+----+--++-----++--+-------++-+-+++\          | ||       ||   | |  | |  |  |   |||     || |    
  | || |    | |  ||       |||| |  |  |           |   | |    |  ||     ||  | /-----++-+-++++----------+\||       ||   ^ | /+-+--+--+---+++-----++-+---\
  | || |    | |  ||       |||| |  |  |           |   | |    |  ||     ||  | |     || | ||||          ||||       ||   | | || |  |  |   |||     || |   |
  | || |    | |  ||       |||| |  |  |           |   | |  /-+--++-----++--+-+-----++-+-++++---\      ||||       ||   | | || |  |  |   |||     || |   |
  | || |    | |  ||       |||| |  |  |           |   | |  | |  ||     ||  | |     || | ||||   |      ||||       ||   | | || |  |  |   |||     || |   |
  | || |    | |  ||       |||| |  |/-+-----------+---+-+--+-+--++-----++--+-+-----++-+-++++---+------++++-------++---+-+-++-+--+--+---+++-\   || |   |
  \-++-+----+-+--++-------++++-+--++-+-----------+---+-+--+-+--++-----++--+-+-----++-+-/|||   |      ||||       ||   | | || |  |  |   ||| |   || |   |
    || |    | |  ||     /-++++-+--++-+-----------+---+-+--+-+--++-----++--+-+-----++-+--+++---+------++++-------++---+-+-++-+--+\ |   ||| |   || |   |
    || |    | |  || /---+-++++-+--++-+-----------+---+-+--+-+--++--\  ||  | |     || |  |||   |      ||||       ||   | | || |  || |   ||| |   || |   |
    || | /--+-+--++-+---+-++++-+--++-+-----------+---+-+--+-+--++--+--++--+-+-----++-+-\|||   |      ||||       ||   | | || |  || |   ||| |   || |   |
    || | |  | |  || |   | |||\-+--++-+-----------+---+-+--+-+--++--+--++--+-+-----++-+-+++/   |      ||||       ||   | | || |  || |   ||| |   || |   |
    || | |  | |  || |   | |||  |/-++-+---------\ |   | |  | |  ||  |  ||  | |     || | |||    |      ||||       ||   | | || |  || |   ||^ |   || |   |
  /-++-+-+--+-+--++-+---+-+++--++-++-+---------+-+---+-+--+-+--++--+--++--+-+-----++-+-+++----+-----\||||       ||   | | || |  || |   ||| |   || |   |
  | || | |  | \--++-+---+-+++--++-++-+---------+-+---+-+--+-/  ||  |  ||  | |     || |/+++----+-----+++++-\     ||   | | || |  || |   ||| |   || |   |
  | || | |  |    || |   | |||  || || |         | |   | |  |    ||  |  ||  | |     || |||||    |     ||||| |     ||   | | || |  || |   ||| |   || |   |
  | || | |  |    || |   | |||  || || |         | |   | |  |    ||  |/-++--+-+-----++-+++++----+-----+++++-+-----++---+\| || |  || |   ||| |   || |   |
  | || | |  |    || |   | |||  || || |         | |   | |/-+----++--++-++--+-+-----++-+++++----+-----+++++-+-----++---+++-++-+-\|| |   ||| |   || |   |
  | || | |  |    || |   | |\+--++-++-+---------+-+---+-++-+----++--++-++--+-+-----++-+++++----+-----+++++-+-----++---/|| || | ||| |   ||| |   || |   |
  | |\-+-+--+----++-+---+-+-+--/| || |         | |   | || |  /-++--++-++--+-+-\   || |||||    |     |||\+-+-----+/    || || | ||| |   ||| |   || |   |
  | |  \-+--+----++-+---+-+-+---+-++-+---------+-+---+-++-+--+-++--++-++--+-+-+---++-+++/|    |     ||| | |     |/----++-++-+-+++\|   ||| |   || |   |
  | |    |  | /--++-+---+-+\|   | || |         | |   | || |  | ||  || ||  | | |   || \++-+----+-----+++-+-+-----++----++-++-+-+++++---++/ |   || |   |
/-+-+----+--+-+--++-+---+-+++--\| \+-+---------+-+---+-++-+--+-/|  || ||  | | |   ||  || |    |     ||| | |     ||    || || | |||||   ||  |   || |   |
| | |    |  | |  || |   | |||  ||  | |         | |   | || |  |  |  || ||  | | |   ||  || |    |     ||| | |     ||    || || | |||||   ||  |   || |   |
| | |    | /+-+--++-+---+-+++--++--+-+---------+-+---+-++-+--+-\|  || ||  | | |/--++--++-+----+-----+++-+-+-----++----++-++-+\|||||   ||  |   || |   |
| | |    | || |  || |   | |||  ||  | |  /------+-+---+-++-+--+-++--++-++--+-+-++--++--++-+----+-----+++-+-+---\ ||    || || |||||||   ||  |   || |   |
| | |    | || |  || |   | |||  ||  | |  | /----+-+---+-++-+--+-++--++-++--+-+\||  ||  || |    |     ||| \-+---+-++----+/ || |||||||   ||  |   || |   |
| | |   /+-++-+--++-+---+-+++--++--+-+--+-+----+-+---+-++-+--+-++--++-++--+-++++--++--++-+----+-----+++---+\  |/++----+--++-+++++++--\||  |   || |   |
| | |   || || |  || |   | |||  ||  | |  | |    | |   | || |  | ||  || ||  | ||||  ||  || |    |     |||   ||  ||||    |  || |||||||  |||  |   || |   |
| | |   || || |  || | /-+-+++--++--+-+--+-+----+-+---+-++-+--+-++--++-++--+\|||| /++--++-+----+-----+++--\||  ||||    |  || |||\+++--+++--+---+/ |   |
| | |   || || |  || | | | |||  ||  | |  | |    | |   | || \--+-++--++-++--++++++-+++--++-+----/     |||  |||  ||||    |  || ||| |||  |||  |   |  |   |
| | |   || |\-+--++-+-+-+-+++--++--+-+--+-+----+-+---+-++----+-++--++-++--++++++-+/|  || |          |||  |||  ||||    |  || ||| |||  |||  |   |  |   |
| | |   || |/-+--++-+-+-+-+++--++--+-+--+-+----+-+---+-++----+-++--++-++--++++++-+-+--++-+---\      |||  |||  ||||    |  || ||| |||  |||  |   |  |   |
| | |   || ||/+--++-+-+-+-+++--++--+-+\ | |    | |/--+-++----+-++--++-++--++++++-+-+--++-+---+-\    |||  |||  ||||    |  || ||| |||  |||  |   |  |   |
| | |   || ||||  || | | | |||  ||  | || | |  /-+-++>-+-++----+-++--++-++--++++++-+-+--++-+---+-+----+++--+++--++++----+--++-+++-+++--+++--+---+\ |   |
| | | /-++-++++--++-+-+-+-+++--++--+\|| | |  | | ||  | ||    | ||  || ||  |||||\-+-+--++-+---+-+----+++--+++--++++----+--++-+/| |||  |||  |   || |   |
| ^ | | || ||||  || | | | |||  ||  |||| | |  | | ||  | \+----+-++--++-++--+++++--+-+--++-+---+-+----+++--+++--++++----+--++-+-+-+++--++/  |   || |   |
| | | | ||/++++--++-+-+-+-+++--++--++++-+-+--+-+-++--+--+----+-++--++<++--+++++--+-+--++-+---+-+-\  |||  |||  ||||    |  ||/+-+-+++--++---+--\|| |   |
| | | | |||||||  || | | | |||  ||  ||||/+-+--+-+-++--+--+----+-++--++-++--+++++--+-+--++-+--\| | |  |||  |||  ||||    |  |||| | |||  ||   |  ||| |   |
| | | | |||||||  || | | | |||  ||  |||||| |  | | ||  |  |    \-++--++-++--++++/ /+-+--++-+--++-+-+--+++--+++--++++----+-\|||| | |||  ||   |  ||| |   |
| | | | |||||||  || | | | |||  ||  |||||| |  | | ||  | /+------++--++-++\ \+++--++-+--++-+--++-+-+--+++--+++--++++----+-++/|| | |||  ||   |  ||| |   |
| | | | |||||||  || | | | |||  ||  |||||| |  | | ||  | ||/-----++--++-+++--+++--++-+--++-+--++-+-+--+++--+++--++++----+-++-++-+-+++--++---+--+++\|   |
| | | | |||\+++--++-+-+-+-+++--++--++++++-+--+-+-++--+-+++-----/|  || |||  |||  || |  || |  || | |  |||  |||  ||||    | || || | |||  ||   |  |||||   |
| | | | ||| |||  || | | | |||  ||  |||||| |/-+-+-++--+-+++------+--++-+++--+++--++-+--++-+--++-+-+--+++--+++--++++----+-++-++-+-+++\ ||   |  |||||   |
| | | | ||| |\+--++-+-+-+-+++--++--+++/|| || | | ||  | |||      |  || |||  |||  || | /++-+--++\| |  |||  |||  ||||    | || || | |||| ||   |  |||||   |
| | | | ||| | |  || | | | |||  ||  ||| || || | | ||  | |||      |  || |||  |||  || | ||| |  ||||/+--+++--+++--++++--\ | || || | |||| ||   |  |||||   |
| | | | ||| |/+--++-+-+-+-+++--++\ ||| || || | | ||  | |||      |  || |||  |||  || | ||| |  ||||||  |||  |||  ||||  | | || || | |||| ||   |  |||||   |
| | | | ||| |||  || | | | |||  ||| ||| || ||/+-+-++--+\|||      |  || |||  |||  || | ||| | /++++++--+++--+++--++++--+-+-++-++\| |||| ||   |  |||||   |
| | | | ||| |||  || | | \-+++--+++-+++-++-++++-+-++--+++++------+--++-+++--+++--++-+-+++-+-+++++++--+++--+++--++++--+-+-++-++++-/||| ||   |  |||||   |
| | | | ||| |||  || | |   |||  ||| ||| || \+++-+-++--+++++------+--++-+++--++/  || | ||| | |||||||  |||  |||  ||||  | | || ||||  ||| ||   |  |||||   |
| | v | |\+-+++--++-+-+---+++--+++-+++-++--+++-+-++--+++++------+--++-+++--++---++-+-++/ | |||||||  |||  |||  ||||  | | || ||||  ||| ||   |  |||||   |
| | | | | | |||  || | |   |||  ||| ||| ||  ||| | ||  |||\+------+--++-+++--++---++-+-++--+-+++++++--+++--+++--++++--+-+-++-+++/  ||| ||   |  |||||   |
| | | | | | |||  || |/+---+++--+++-+++-++--+++\| ||  ||| |      |  || |||/>++---++-+-++--+-+++++++--+++--+++--++++--+-+-++-+++---+++-++--\|  |||||   |
| | | | | | |||  ||/+++---+++--+++-+++-++--+++++\||  ||| |      |  || |||| ||/--++-+-++--+-+++++++--+++--+++-\||||  | | || |||   ||| ||  ||  |||||   |
| | | |/+-+-+++--++++++---+++--+++-+++-++--++++++++\ ||| |      |  ||/++++-+++--++-+\||  | |||||||  |||  ||| |||||  | | || |||   ||| ||  ||  |||||   |
| | | \++-+-+++--++++++---+++--+++-+/| ||  ||||||||| ||| |      |  ||||||| |||  || ||||  | |||||||/-+++--+++-+++++-\| | || |||   ||| ||  ||  |||||   |
| | |  || | |||  ||||||   |||  ||| | | ||  ||||||||| ||| |     /+--+++++++-+++--++-++++--+-++++++++-+++--+++-+++++-++-+-++-+++---+++-++--++--+++++\  |
| | |  || | |||  ||||||   |||  ||| \-+-++--+++++++++-+++-+-----++--+++++++-+++--++-++++--+-++++++++-+++--+++-+++++-++-+-++-+++---+++-++--+/  ||||||  |
| | |  || | |||  ||||||   |||  |||   | ||  ||||||||| ||| |     ||  ||||||| |||  || ||||  | |||||||| |||  ||| ||||| || | || |||   ||| ||  |   ||||||  |
| | |  || | ||\--++++++---+/| /+++---+-++--+++++++++-+++-+-----++--+++++++-+++--++-++++--+-++++++++-+++--+++-+++++-++-+-++-+++--\||| ||  |   ||||||  |
| \-+--++-+-++---++++++---+-+-++++---+-++--+++++++++-+++-+-----++--+++++++-+++--++-++++--+-++++++++-/||  ||| ||||| || | || |||  |||| ||  |   ||||||  |
|   |  || | ||   ||||||   | | ||||   | ||  ||||||||| ||| |     ||/-+++++++-+++\ || ||||  | ||||||||  ||  ||| ||||| || | || |||  |||| ||  |   ||||||  |
|   |  || | ||   ||||||   | | ||||   | ||  ||||||||| ||| |     ||| ||||||| |||| || ||||  | ||||||||  ||  ||| ||||| || | || |||  |||| ||  |   ||||||  |
|   |  || | ||   ||||||   | | ||||   | ||  ||||||||| ||| |     ||| ||||||| |||| || \+++--+-++++++++--++--+++-+++++-++-+-++-+++--++/| ||  |   ||||||  |
|   |  || | ||   ||||||   | | ||||   | ||  ||||||||| ||| |     ||| ||||||| |||| ||  |||  | ||||||||  ||  ||| ||||| || | || |||  || | ||  |   ||||||  |
|   |  || | ||   ||||||   | | ||||   | ||  ||||||||| ||| |     ||| ||||||| |||| ||  |||  | \+++++++--++--+++-+++++-++-+-++-++/  || | ||  |   ||||||  |
|   |  || | ||   ||||||   | | |||| /-+-++--+++++++++-+++-+-----+++-+++++++-++++-++--+++--+--+++++++--++\ ||| ||||| || | || ||   || | ||  |   ||||||  |
|   |  || | ||   ||||||   | | |||| | | ||  |\+++++++-+/| \-----+++-+++++++-++++-++--+++--+--+++++++--+++-+++-+++++-++-+-++-++---++-+-++--+---+++/||  |
|   |  || | || /-++++++---+-+\|||| | | || /+-+++++++-+-+\      ||| |||\+++-++++-++--+++--+--+++++++--+++-+++-+++++-++-+-++-++---++-+-++--+---+++-/|  |
|   |/-++-+-++-+-++++++---+-++++++-+-+-++-++-+++++++-+\||      ||| ||| ||v |||| ||  |||  |  |||||||  ||| ||| ||||| || | || ||   || | ||  |   |||  |  |
|   || || | || | ||||||   | |||||| | | || || ||||||| ||||      ||| |\+-+++-++++-++--+++--+--+++++++--+++-+++-+++++-++-/ ^| ||   || | ||  |   |||  |  |
|   || || | || | ||||||   | ||||\+-+-+-++-++-++/|||| ||||      ||| | | ||| ||\+-++--+++--+--+++++++--+++-+++-/|||| ||   || ||   || | ||  |   |||  |  |
|   || || | || | ||||||   | |||| | | | || || ||/++++-++++---\  ||| | | ||| || | ||  |||  |  |||||||  ||| |||  |||\-++---++-++---+/ | ||  |   |||  |  |
|   || |\-+-++-+-++++++---+-++++-+-+-+-++-++-+++++++-++++---+--+++-+-+-+++-++-+-++--+++--+--+++++++--+++-++/  |||  ||   || ||   |  | ||  |   |||  |  |
|   || |  | || | ||||||   | |||| | | | || || ||||||| \+++---+--+++-+-+-+++-++-+-++--+++--+--+++++++--+++-++---+++--++---++-++---+--+-++--+---+/|  |  |
|   || |  | || | ||||||   \-++++-+-+-+-++-++-++++/||  |||   |  ||| | | ||| || | ||  |||  |  |||||||  ||| ||   |||  ||   || ||   |  | ||  |   | |  |  |
|   || |  | || | ||||||     |||| | | | || || |||| ||  |||   |  ||| | | ||| || | ||  |||  |  ||||\++--+++-++---+++--+/   || ||   |  | ||  |   | |  |  |
|   || |  | || | ||||||     |||| | | | || || |||| ||  |||   |  ||| | | ||| || | |\--+++--+--++++-++--+++-/|   |||  |    || ||   |  | ||  |   | |  |  |
|   || |  | || | ||||||     |||| | | | || || |||| ||  |||   |  ||| | |/+++-++-+\|   |||  |  |||| ||  |||  |   |||  |    || ||   |  | ||  |   | |  v  |
|   || |  \-++-+-++++++-----++++-+-+-+-++-++-++++-++--+++---+--+++-+-+++++-++-+++---+++--+--++++-/|  |||  |   |||  |    |\-++---+--+-++--+---+-+--+--/
|   |\-+----++-+-++++++-----++++-+-+-+-++-++-++++-++--/||   |  ||| | ||||| || |||   |||  |  ||||  |  |||  |   |||  |    |  ||   |  | ||  |   | |  |   
|   |  | /--++-+-++++++-----++++-+-+-+-++-++-++++-++-\ ||   |  ||| | \++++-++-+++---/||  |  ||||  |  |||  |   |||  |    |  |\---+--+-+/  |   | |  |   
|   |  | |  || | ||||||/----++++-+-+-+-++\|| |||| || | ||   |  \++-+--++++-++-+++----++--+--++++--+--+++--+---+++--+----+--+----+--+-+---+---+-+--/   
|   |  | |/-++-+-+++++++----++++-+-+-+-+++++-++++-++-+-++---+---++-+--++++-++-+++\   ||  |  ||||  |  |||  |   |||  |    |  |    |  | |   |   | |      
|   |  | ||/++-+-+++++++----++++-+-+-+-+++++\|||| || | ||   |   || |  |||| || ||||   ||  |  ||||  |  |||  |   |||  |    |  |    |  | |   |   | |      
|   |  | ||||| | \++++++----++++-+-+-/ |||||||||| ||/+-++---+---++-+--++++-++-++++---++--+--++++--+-\|||  |   |||  |    |  |    |  | |   |   | |      
|   |  | ||||| \--++++++----+/|| | |   \+++++++++-++++-++---+---++-+--++++-++-++++---++--+--/|||  | ||||  |  /+++--+----+-\|    |  | |   |   | |      
|   \--+-+++++----++++++----+-++-+-+----+++++++++-++++-++---+---++-+--++++-++-++++---++--+---+++--+-++++--+--+++/  |    |/++----+--+-+---+---+\|      
|      | |||||    ||||||    \-++-+-+----+++++++++-++++-++---+---++-+--+/|| |\-++++---++--+---+++--+-++/|  |  |||   |    ||||    |  | |   |   |||      
|      | |||||    ||\+++------++-+-+----+++++++++-++++-++---+---++-/  |/++-+--++++---++--+---+++--+-++-+--+--+++---+----++++----+--+-+-\ |   |||      
|     /+-+++++---\|| |||      || | |    |||||||||/++++-++---+---++----++++-+--++++---++--+---+++--+-++-+--+--+++---+----++++-\  |  | | | |   |||      
|     || |||||   ||| |\+------++-+-+----++++++++++++++-++---+---++----++++-/  ||||   ||  |   |||  | || |  |  |||   |    |||| |  |  | | | |   |||      
|     || |||||   ||| | |      || | |    |||\++++++++++-++---+---++----++++----++++---++--+---+++--+-++-+--+--+++---+----++++-+--+--/ | | |   |||      
|     || |||||   |\+-+-+------++-+-+----+++-++++++++++-++---+---++----++++----++++---++--/   |||  | || |  |  |||   |    |||| |  |    | | |   |||      
|     || |||||   | | | |      || | |    ||| |||||||||| ||   |   \+----++++----++++---++------+++--+-+/ |  |  |||   |    |||| |  |    | | |   |||      
|     || |||||   | | | |      || | |    \++-++++++++++-++---+----+----++++----++++---++------+++--+-+--+--+--+/|   |    |||| |  |    | | |   |||      
|     || |||||   | | | |      || | |     || |||||||||| ||   |    |    ||||    ||||   ||      |||  | |  |  |  | |   |    |||| |  |    | | |   |||      
|     || |||||   | | | |      || | |     || |||||||||| ||   |    |    ||||    ||||   ||      |||  | |  |  |  | |   |    |||| |  |    | | |   |||      
|     |\-+++++---+-+-+-+------++-+-+-----++-+++++++/|| ||   |    |    ||||    ||||   ||      |||  | |  |  |  | |   |    |||| |  |    | | |   |||      
|     |  |||||   | | | |      || | |     |\-+++++++-++-+/   |    |    ||||    ||||   ||      |||  | |  |  |  | |   |    |||| |  |    | | |   |||      
|     |  |||||   | | | |      || | |     |  ||||||| \+-+----+----+----++++----++++---++------+++--+-/  |  |  | |   |    |||| |/-+----+-+-+---+++---\  
|     |  |||||   | | | |      \+-+-+-----+--+++++++--+-+----+----+----++++----++++---++------+++--+----+--+--+-+---+----++++-++-/    | | |   |||   |  
|     |  |||||   | | | |       | | |     |  |||||||  |/+----+----+----++++----++++---++------+++--+----+--+--+-+---+----++++-++------+-+-+---+++---+\ 
|     |  |||||   | | | |       | | |     |  |||||||  |||    |    |    |\++----++++---++------+++--+----+--+--+-+---+----++++-++------+-/ |   |||   || 
|     |  \++++---+-+-+-+-------+-+-+-----+--+++++++--/||    |    |    | ||/---++++---++------+++--+----+--+--+-+---+----++++-++--\   |   |   |||   || 
|     |   ||||   | | | |       | | |     |  |||||||   ||    |    |    | |||   ||\+---++--<---+++--+----+--+--+-+---+----/||| ||  |   |   |   |||   || 
|     |   ||||   | | | |       | | |     |  |\+++++---++----+----+----+-+++---++-+---++------+++--+----+--+--+-+---+-----+++-++--+---+---+---++/   || 
|     |   ||||   | | | |       | | |     |  | |||||   ||    |    |    | |||   || |   ||      |||  |    |  |  | |   |     ||| ||  |   |   |   ||    || 
|     |   ||||   | | | |       | | |     |  | |||||   ||    |    |    | |||   || |   \+------+/|  |    |  |  | |   |     ||| ||  |   |   |   ||    || 
|     |   ||||   | | | |       | | |     |  | |||||   ||    |    |    | |||   || |    |      | |  |    |  |  | |   |     ||| ||  |   |   |   ||    || 
|     |   \+++---+-+-+-+-------+-+-+-----+--+-+++++---++----+----+----+-+++---++-/    |      | |  |    |  |  | |   |     ||| ||  |   |   |   ||    || 
|     |    |||   | | | |       | | |   /-+--+-+++++---++----+----+----+-+++---++------+------+-+--+----+--+\ | |   |     ||| ||  |   |   |   ||    || 
|     |    ||\---+-+-+-+-------+-/ |   | |  | |\+++---++----/    \----+-+++---/|      |      | |  |    |  || | |   |     ||| ||  |   |   |   ||    || 
|     |    || /--+-+-+-+-------+---+\  | |  | | |||   ||              | |||    |      \------+-+--+----+--/| \-+---+-----+/| ||  |   |   |   ||    || 
|     |    \+-+--+-+-+-+-------+---++--+-+--/ | |||   ||              | |||    |             | |  |    |   |   |   |     | | ||  |   |   |   ||    || 
|     |     | |  | |/+-+-------+---++--+-+----+-+++---++--------\     | |||    |             | |  |    |   |   |   |     | | ||  |   |   |   ||    || 
|     |    /+-+--+-+++-+-------+---++--+-+----+-+++---++--------+-----+-+++----+----------->-+-+--+----+---+---+\  |     | | |\--+---+---+---++----/| 
|     |    || |  | ||| | /-----+--\||  | |    | |||   ||        |     | |||    |             | |  | /--+---+---++--+-----+-+-+---+--\|   |   ||     | 
|     |    || |  | ||| | |     |  |||  | |    | |||   ||        |     | ||\----+-------------+-+--+-+--+---+---++--+-----+-+-+---/  ||   |   ||     | 
|     |    || |  | ||| | |     |  |||  | |    | |||   ||        |     | ||     |             | |  | |  |   |   ||  |     | | |      ||   |   ||     | 
\-----+----++-+--+-+++-+-+-----/  |||  | |    | |||   ||        |     | ||     |             | |  \-+--+---+---++--/     | | |      ||   |   ||     | 
      |    || |  | ||\-+-+--------+++--+-+----/ |||   ||        |     | ||     |             | |  /-+--+---+---++--------+-+-+------++---+---++\    | 
      |    || |  | ||  | |        |||  | |      |||   ||        |     | ||     |             | |  | |  |   |   ||        | | |      ||   |   |||    | 
      \>---++-+--/ ||  | |        |||  \-+------+++---++--------+-----+-++-----+-------------+-+--+-+--+->-/   ||        \-+-+------++---+---+/|    | 
           || \----++--+-+--------++/    |      |\+---++--------+-----+-++-----+-------------+-+--+-+--+-------++----------+-/      ||   |   | |    | 
           ||      ||  | |        ||     |      | |   \+--------+-----+-++-----+-------------+-+--+-+--+-------++----------+--------++---+---+-+----/ 
           ||      ||  | |        ||     |      | \----+--------+-----+-++-----+-------------+-/  | |  |       ||          |        ||   |   | |      
           |\------++--+-+--------++-----+------+------+--------+-----+-++-----+-------------/    | |  |       ||          \--------++---+---/ |      
           |       |\--+-+---<----++-----+------+------+--------/     | ||     |                  | |  |       ||                   ||   |     |      
           |       |   | \--------/|     |      |      \--------------+-/|     |                  | \--+-------++-------------------/|   |     |      
           |       |   |           \-----+------+---------------------+--+-----+-------<----------+----/       \+--------------------/   |     |      
           |       \---+-----------------+------/                     |  |     |                  |             |                        |     |      
           |           |                 |                            \--+-----/                  \-------------+------------------------+-----/      
           \-----------+-----------------+-------------------------------+--------------------------------------/                        |            
                       \-----------------/                               \---------------------------------------------------------------/             ";


    }
}

